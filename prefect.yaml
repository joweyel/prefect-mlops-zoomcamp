# prefect.yaml
name: mlops-zoomcamp
prefect-version: 3.4.4

# Global variables can replace some block usage
variables:
  data_path: ./data
  model_path: ./models

# Pull section for code storage
pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/joweyel/prefect-mlops-zoomcamp.git
    branch: prefect3

# Deployments section
deployments:
- name: taxi_local_data
  version: "3.0"
  tags: ["ml", "training"]
  description: Train model on local taxi data
  entrypoint: 3.4/orchestrate.py:main_flow
  parameters:
    train_path: ./data/green_tripdata_2023-01.parquet
    val_path: ./data/green_tripdata_2023-02.parquet
  work_pool:
    name: zoompool
#   schedule:
#     cron: "0 0 * * *"
#     timezone: "America/New_York"

- name: taxi_s3_data
  version: "3.0"
  tags: ["ml", "training", "aws", "s3"]
  description: Obtains data from s3 bucket and trains model with it
  entrypoint: 3.5/orchestrate_s3.py:main_flow_s3
  parameters:
    train_path: ./data/green_tripdata_2023-01.parquet
    val_path: ./data/green_tripdata_2023-02.parquet
  work_pool:
    name: zoompool
  